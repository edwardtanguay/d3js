<!DOCTYPE html>

<head>
	<title>test simple bar graph</title>
	<link rel="stylesheet" type="text/css" href="style.css">
	<script src="https://unpkg.com/vue@next"></script>
	<!-- <script type="text/javascript" src="d3.v4.js"></script> -->
	<script type="text/javascript" src="d3v6.2.0.js"></script>
	<style>
		.area {
			width: 600px;
			height: 600px;
			background-color: #eee;
		}

		.controls {
			margin: 10px 2px;
		}

		.colorControls {
			margin-bottom: 5px;
			display: flex;
			justify-content: flex-start;
		}
	</style>
</head>

<body>
	<div id="app" class="controls">
		<div class="information">{{message}}</div>
		<button @click="changeTheText">Change the Text</button>
		<div class="colorControls">
			<button @click="changeColor('orange')">Orange</button>
			<button @click="changeColor('green')">Green</button>
		</div>
		<div>{{leftIndent}}</div>
	</div>
	<div class="area"></div>
	<script>
		// VUE
		const app = Vue.createApp({
			data() {
				return {
					message: '',
					leftIndent: 40,
					color: "orange"
				}
			},
			methods: {
				initialize() {
					this.message = 'original value';
					var dataArray = [5, 11, 18, 20, 3, 5, 7];
					d3.select(".area").html("");
					var svg = d3.select(".area").append("svg").attr("height", "100%").attr("width", "100%");
					svg.selectAll("rect")
						.data(dataArray)
						.enter().append("rect")
						.attr("height", function (d, i) { return d * 15; })
						.attr("width", "50")
						.attr("fill", this.color)
						.attr("x", (d, i) => (60 * i) + this.leftIndent)
						.attr("y", (d, i) => 580 - (d * 15));
				},
				changeTheText() {
					this.message = 'you clicked the button';
					this.leftIndent = 20;
					this.initialize();
				},
				changeColor(color) {
					this.color = color;
					this.initialize();
				}
			}
		})
		const vm = app.mount('#app');
		vm.initialize();

		// D3JS

	</script>
</body>

</html>